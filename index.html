<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>ä¸­å›½å†å²åœ°åäº¤äº’åœ°å›¾ Â· Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet åœ°å›¾ -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <style>
    :root {
      --bg: #020617;
      --bg-soft: #0b1120;
      --card-bg: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.12);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border: #1f2937;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, "SF Pro Text",
        "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: radial-gradient(circle at top, #020617 0, #000 60%);
      color: var(--text-main);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* é¡¶éƒ¨å¯¼èˆª */
    .navbar {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(14px);
      background: linear-gradient(
        to bottom,
        rgba(15, 23, 42, 0.96),
        rgba(15, 23, 42, 0.7)
      );
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
    }

    .nav-inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0.6rem 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo-badge {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #38bdf8, #6366f1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      color: #0b1120;
      box-shadow: 0 0 18px rgba(56, 189, 248, 0.7);
    }

    .brand-text-main {
      font-weight: 600;
      letter-spacing: 0.03em;
    }
    .brand-text-sub {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .nav-cta {
      padding: 0.3rem 0.8rem;
      border-radius: 999px;
      font-size: 0.78rem;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: radial-gradient(circle at top, rgba(56,189,248,0.14), transparent);
      color: var(--text-muted);
      white-space: nowrap;
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 1.2rem 1rem 2rem;
    }

    /* é¡¶éƒ¨è¯´æ˜ + è¾“å…¥æ¡† */
    .hero {
      margin-bottom: 1rem;
    }

    .hero-title {
      font-size: clamp(1.6rem, 3vw, 2.1rem);
      margin: 0 0 0.4rem;
      line-height: 1.2;
    }

    .hero-gradient {
      background: radial-gradient(circle at 10% 0, #38bdf8, #a855f7 45%, #f97316);
      -webkit-background-clip: text;
      color: transparent;
    }

    .hero-subtitle {
      font-size: 0.9rem;
      color: var(--text-muted);
      max-width: 48rem;
      line-height: 1.6;
      margin-bottom: 0.8rem;
    }

    .search-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      align-items: center;
      margin-bottom: 0.4rem;
    }

    .search-input-wrap {
      flex: 1;
      min-width: 180px;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 0.55rem 0.9rem 0.55rem 2.2rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 0.9rem;
      outline: none;
    }

    .search-input::placeholder {
      color: #6b7280;
    }

    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.9rem;
      color: #6b7280;
    }

    .search-btn {
      padding: 0.52rem 1.1rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(to right, #38bdf8, #6366f1);
      color: #0b1120;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.55);
      white-space: nowrap;
    }

    .search-hint {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .search-hint code {
      background: rgba(15,23,42,0.9);
      border-radius: 999px;
      padding: 0.08rem 0.45rem;
      border: 1px solid rgba(148,163,184,0.3);
      font-size: 0.75rem;
    }

    /* ä¸»å¸ƒå±€ï¼šå·¦åœ°å›¾å³ä¿¡æ¯ */
    .main-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr);
      gap: 1rem;
      margin-top: 0.6rem;
    }

    @media (max-width: 900px) {
      .main-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .panel {
      background: var(--card-bg);
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      padding: 0.8rem 0.9rem 0.9rem;
      display: flex;
      flex-direction: column;
      min-height: 280px;
    }

    .panel-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.15rem;
    }

    .panel-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.6rem;
    }

    .panel-body {
      flex: 1;
      position: relative;
      min-height: 260px;
    }

    #map {
      position: absolute;
      inset: 0;
      border-radius: 14px;
      overflow: hidden;
    }

    /* ä¿¡æ¯é¢æ¿ */
    .info-item {
      margin-bottom: 0.6rem;
    }

    .info-label {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 0.1rem;
    }

    .info-value {
      font-size: 0.9rem;
    }

    .info-badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin-top: 0.35rem;
    }

    .info-badge {
      font-size: 0.78rem;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15,23,42,0.9);
      color: var(--text-muted);
    }

    .info-events {
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.6;
      padding-left: 1.1rem;
    }

    .info-events li {
      margin-bottom: 0.2rem;
    }

    .info-empty {
      font-size: 0.82rem;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .status-bar {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.76rem;
      color: var(--text-muted);
      border-top: 1px solid rgba(15,23,42,0.9);
      padding-top: 0.45rem;
      margin-top: 0.5rem;
    }

    .dot-led {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 8px rgba(34, 197, 94, 0.7);
    }

    .footer {
      margin-top: 1.6rem;
      padding-top: 0.9rem;
      border-top: 1px solid rgba(15, 23, 42, 0.9);
      font-size: 0.74rem;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .footer a {
      color: var(--text-muted);
    }

    .footer a:hover {
      color: #e5e7eb;
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <header class="navbar">
    <div class="nav-inner">
      <div class="nav-left">
        <div class="logo-badge">å²</div>
        <div>
          <div class="brand-text-main">ä¸­å›½å†å²åœ°åäº¤äº’åœ°å›¾</div>
          <div class="brand-text-sub">åœ°å€ â†’ åœ°å›¾ â†’ å†å²åˆ«ç§°ä¸äº‹ä»¶</div>
        </div>
      </div>
      <div class="nav-cta">
        é™æ€ç½‘é¡µ Â· å¯éƒ¨ç½²åˆ° GitHub Pages
      </div>
    </div>
  </header>

  <main class="page">
    <!-- è¯´æ˜ + æœç´¢ -->
    <section class="hero">
      <h1 class="hero-title">
        è¾“å…¥ä¸€ä¸ª<span class="hero-gradient">ä¸­å›½åœ°å€æˆ–åŸå¸‚</span>ï¼Œ
        çœ‹çœ‹å®ƒåœ¨å†å²ä¸Šå«ä»€ä¹ˆã€å‘ç”Ÿè¿‡ä»€ä¹ˆå¤§äº‹ã€‚
      </h1>
      <p class="hero-subtitle">
        è¿™æ˜¯ä¸€ä¸ªç”¨äºæ¼”ç¤ºçš„å‰ç«¯é™æ€é¡µé¢ï¼šä¸ä¾èµ–åç«¯æœåŠ¡ï¼Œåªä½¿ç”¨å†…ç½®æ•°æ®ã€‚
        ä½ å¯ä»¥è¾“å…¥å¦‚ <strong>â€œåŒ—äº¬â€ â€œè¥¿å®‰â€ â€œå—äº¬å¸‚ç„æ­¦åŒºâ€ â€œæ´›é˜³é¾™é—¨â€</strong> ç­‰ï¼Œ
        ç¨‹åºä¼šåœ¨å†…ç½®çš„åŸå¸‚/å†å²åœ°åè¡¨ä¸­æ¨¡ç³ŠåŒ¹é…ï¼Œç§»åŠ¨åœ°å›¾å¹¶å±•ç¤ºå†å²ä¿¡æ¯ã€‚
      </p>

      <div class="search-bar">
        <div class="search-input-wrap">
          <span class="search-icon">ğŸ”</span>
          <input
            id="placeInput"
            class="search-input"
            type="text"
            placeholder="è¯·è¾“å…¥åŸå¸‚æˆ–åœ°å€ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬ä¸­å…³æ‘ã€è¥¿å®‰é›å¡”åŒºã€å—äº¬ã€æ´›é˜³é¾™é—¨â€¦â€¦"
          />
        </div>
        <button class="search-btn" onclick="handleSearch()">
          æŸ¥æ‰¾å†å²åœ°åä¸äº‹ä»¶
        </button>
      </div>
      <div class="search-hint">
        å½“å‰å†…ç½®ç¤ºä¾‹åŸå¸‚ï¼š<code>åŒ—äº¬</code> <code>æ´›é˜³</code> <code>è¥¿å®‰</code>
        <code>å—äº¬</code> <code>å¼€å°</code> <code>æ­å·</code> <code>å¹¿å·</code> <code>æˆéƒ½</code>ï¼›
        ä½ å¯ä»¥åœ¨è„šæœ¬ä¸­çš„ <code>places</code> æ•°ç»„ç»§ç»­è¡¥å……ã€‚
      </div>
    </section>

    <!-- ä¸»å¸ƒå±€ï¼šå·¦åœ°å›¾å³ä¿¡æ¯ -->
    <section class="main-grid">
      <!-- åœ°å›¾é¢æ¿ -->
      <article class="panel">
        <div class="panel-title">åœ°å›¾è§†å›¾</div>
        <div class="panel-subtitle">
          é»˜è®¤è§†è§’ä¸ºâ€œä¸­å›½å…¨å›¾â€ã€‚å½“ä½ è¾“å…¥çš„åœ°å€åŒ¹é…åˆ°å†…ç½®åŸå¸‚åï¼Œåœ°å›¾ä¼šè‡ªåŠ¨é£åˆ°å¯¹åº”ä½ç½®å¹¶æ‰“ä¸Šæ ‡è®°ã€‚
        </div>
        <div class="panel-body">
          <div id="map"></div>
        </div>
        <div class="status-bar" id="mapStatus">
          <div class="dot-led"></div>
          <span>çŠ¶æ€ï¼šç­‰å¾…è¾“å…¥ï¼Œå½“å‰è§†è§’ä¸ºä¸­å›½å¤§è‡´èŒƒå›´ã€‚</span>
        </div>
      </article>

      <!-- ä¿¡æ¯é¢æ¿ -->
      <aside class="panel">
        <div class="panel-title">å†å²åœ°åä¸äº‹ä»¶</div>
        <div class="panel-subtitle">
          æ ¹æ®ä½ è¾“å…¥çš„åœ°å€ / åœ°åï¼Œåœ¨å†…ç½®æ•°æ®ä¸­æŸ¥æ‰¾å¯¹åº”åŸå¸‚æˆ–å†å²åˆ«ç§°ï¼Œå¹¶å±•ç¤ºæ¦‚è¦ä¿¡æ¯ã€‚
        </div>

        <div id="infoContainer">
          <p class="info-empty">
            â¬… è¯•ç€åœ¨å·¦ä¸Šæ–¹è¾“å…¥æ¡†å†…é”®å…¥ã€ŒåŒ—äº¬ã€ã€Œé•¿å®‰ã€ã€Œé‡‘é™µã€ã€Œæ±´æ¢ã€ã€Œä¸´å®‰ã€ç­‰è¯•éªŒã€‚
            è¿™é‡Œä¼šå±•ç¤ºè¯¥åœ°çš„ï¼š<br>
            Â· ç°ç”¨åç§°ä¸å¤§è‡´ä½ç½®<br>
            Â· å†å²åˆ«ç§°ï¼ˆå·åºœã€æ—§éƒ½ã€å¤ç§°ç­‰ï¼‰<br>
            Â· ä¸åŒæœä»£ä¸‹çš„è§’è‰²ä¸å‡ ä»¶ä»£è¡¨æ€§å†å²äº‹ä»¶
          </p>
        </div>
      </aside>
    </section>

    <!-- é¡µè„š -->
    <footer class="footer">
      <div>Â© <span id="year"></span> ä¸­å›½å†å²åœ°åäº¤äº’åœ°å›¾ Â· Demo é¡µé¢</div>
      <div>
        <a href="javascript:scrollToTop()">è¿”å›é¡¶éƒ¨</a>
      </div>
    </footer>
  </main>

  <script>
    // === ç®€å•çš„æ•°æ®æ¨¡å‹ï¼šå¯ä»¥åœ¨è¿™é‡Œä¸æ–­è¡¥å……åŸå¸‚ ===
    // æ¯ä¸ªæ¡ç›®åŒ…å«ï¼šç°åã€åˆ«ç§°æ•°ç»„ã€åæ ‡ã€åŒºåŸŸã€ç®€è¦è¯´æ˜ã€è‹¥å¹²å†å²äº‹ä»¶
    const places = [
      {
        name: "åŒ—äº¬",
        aliases: ["åŒ—äº¬","ç‡•äº¬","è“Ÿ","å¹½å·","å¤§éƒ½","é¡ºå¤©åºœ","åŒ—å¹³"],
        coord: [39.9042, 116.4074],
        region: "ååŒ— Â· é¦–éƒ½åœˆ",
        summary: "è‡ªå…ƒä»£ä»¥æ¥é•¿æœŸä½œä¸ºå…¨å›½æ”¿æ²»ä¸­å¿ƒï¼Œå…ˆåä¸ºå…ƒå¤§éƒ½ã€æ˜æ¸…åŒ—äº¬ä»¥åŠä¸­åæ°‘å›½åŒ—å¹³ã€æ–°ä¸­å›½é¦–éƒ½æ‰€åœ¨åœ°ã€‚",
        events: [
          "æˆ˜å›½æ—¶æœŸå±ç‡•å›½ï¼Œç§°è“Ÿï¼Œæ˜¯ç‡•å›½éƒ½åŸä¹‹ä¸€ã€‚",
          "å”ä»£ä¸ºå¹½å·ï¼Œå®‰å²ä¹‹ä¹±çˆ†å‘åæˆä¸ºé‡è¦è—©é•‡é‡åœ°ã€‚",
          "å…ƒä¸–ç¥–å¿½å¿…çƒˆå®šéƒ½äºæ­¤ï¼Œç§°â€œå¤§éƒ½â€ï¼Œå¼€å¯è¿ç»­æ•°ç™¾å¹´å…¨å›½æ€§éƒ½åŸåœ°ä½ã€‚",
          "æ˜æ°¸ä¹å¹´é—´è¿éƒ½ï¼Œæ­£å¼æˆä¸ºæ˜æ¸…ä¸¤ä»£é¦–éƒ½ã€‚",
          "1912â€“1949 å¹´é—´ä»¥â€œåŒ—å¹³â€ä¹‹åå­˜åœ¨ï¼Œ1949 å¹´åå®šåâ€œåŒ—äº¬â€ã€‚"
        ]
      },
      {
        name: "æ´›é˜³",
        aliases: ["æ´›é˜³","æ´›é‚‘","ç¥éƒ½","ä¸œéƒ½","æ²³å—åºœ"],
        coord: [34.6197, 112.4540],
        region: "åä¸­ Â· é»„æ²³ä¸­æ¸¸",
        summary: "ä¸­å›½å†å²ä¸Šçš„â€œä¹æœå¤éƒ½â€ä¹‹ä¸€ï¼Œå¤šæœåœ¨æ­¤å»ºéƒ½ï¼Œä¸é•¿å®‰å¹¶ç§°â€œäºŒäº¬â€ã€‚",
        events: [
          "å‘¨æˆç‹ã€å‘¨åº·ç‹åœ¨æ­¤å»ºéƒ½ï¼Œç§°â€œæ´›é‚‘â€ï¼Œä¸é•äº¬å¹¶ç§°â€œä¸¤äº¬â€ã€‚",
          "ä¸œæ±‰å…‰æ­¦å¸åˆ˜ç§€å®šéƒ½æ´›é˜³ï¼Œæ­¤åæˆä¸ºä¸œæ±‰æ”¿æ²»æ–‡åŒ–ä¸­å¿ƒã€‚",
          "éš‹ç‚€å¸ã€å”ä¸­å®—å‡æ›¾åœ¨æ´›é˜³å¤§è§„æ¨¡è¥å»ºå®«å®¤ã€è‹‘å›¿ï¼Œå”ä»£ç§°â€œä¸œéƒ½æ´›é˜³â€ã€‚",
          "åŒ—é­å­æ–‡å¸è¿éƒ½æ´›é˜³åï¼Œæ¨è¡Œæ±‰åŒ–æ”¹é©ï¼Œä½¿æ´›é˜³æˆä¸ºå½“æ—¶å›½é™…æ€§å¤§éƒ½ä¼šã€‚"
        ]
      },
      {
        name: "è¥¿å®‰",
        aliases: ["è¥¿å®‰","é•¿å®‰","é•äº¬","äº¬å…†","å¤§å…´åŸ"],
        coord: [34.3416, 108.9398],
        region: "è¥¿åŒ— Â· å…³ä¸­å¹³åŸ",
        summary: "åä¸‰æœå¤éƒ½ï¼Œä¸­å›½å¤ä»£éƒ½åŸä¸­å†å²æœ€æ‚ ä¹…ã€å»ºéƒ½æœä»£æœ€å¤šçš„åŸå¸‚ä¹‹ä¸€ï¼Œå¤ç§°é•¿å®‰ã€‚",
        events: [
          "è¥¿å‘¨åœ¨é•äº¬å»ºéƒ½ï¼Œå¥ å®šå…³ä¸­åœ°åŒºâ€œå¤©åºœä¹‹å›½â€çš„åœ°ä½ã€‚",
          "è¥¿æ±‰é«˜ç¥–åˆ˜é‚¦å®šéƒ½é•¿å®‰ï¼Œæ­¤åæˆä¸ºæ±‰å¸å›½æ”¿æ²»ç»æµä¸­å¿ƒã€‚",
          "éš‹æ–‡å¸è¥å»ºå¤§å…´åŸï¼Œå”ä»£åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å»ºä¸ºé•¿å®‰åŸï¼Œæ˜¯å½“æ—¶ä¸–ç•Œä¸Šæœ€å¤§çš„åŸå¸‚ä¹‹ä¸€ã€‚",
          "å”ç„å®—æ—¶æœŸé•¿å®‰äººå£è¾¾åˆ°ç™¾ä¸‡ï¼Œæˆä¸ºä¸ç»¸ä¹‹è·¯çš„èµ·ç‚¹ä¸å›½é™…æ–‡åŒ–äº¤æµä¸­å¿ƒã€‚"
        ]
      },
      {
        name: "å—äº¬",
        aliases: ["å—äº¬","å»ºåº·","å»ºé‚º","çŸ³å¤´åŸ","é‡‘é™µ","æ±Ÿå®åºœ"],
        coord: [32.0603, 118.7969],
        region: "åä¸œ Â· é•¿æ±Ÿä¸‹æ¸¸",
        summary: "ä¸­å›½å†å²ä¸Šçš„é‡è¦éƒ½åŸä¸é—¨æˆ·åŸå¸‚ï¼Œå…­æœã€æ˜åˆä»¥åŠè¿‘ç°ä»£å¤šæ¬¡å®šéƒ½äºæ­¤ã€‚",
        events: [
          "ä¸œå´å­™æƒåœ¨æ­¤å»ºéƒ½ï¼Œç§°â€œå»ºä¸šâ€ï¼Œæ˜¯ä¸‰å›½æ—¶æœŸæ±Ÿä¸œæ”¿æƒä¸­å¿ƒã€‚",
          "ä¸œæ™‹åŠå—æœå®‹é½æ¢é™ˆå…ˆåå®šéƒ½ï¼Œå½¢æˆæ‰€è°“â€œå…­æœå¤éƒ½â€ã€‚",
          "æ˜å¤ªç¥–æœ±å…ƒç’‹åœ¨æ­¤å®šéƒ½ï¼Œå»ºå—äº¬åŸä¸æ˜æ•…å®«ï¼Œåè¿éƒ½åŒ—äº¬ã€‚",
          "è¿‘ä»£ä»¥æ¥å…ˆåä½œä¸ºå¤ªå¹³å¤©å›½å¤©äº¬ã€ä¸­åæ°‘å›½é¦–éƒ½ä»¥åŠæŠ—æˆ˜æ—¶æœŸé‡è¦æ”¿æ²»ä¸­å¿ƒã€‚"
        ]
      },
      {
        name: "å¼€å°",
        aliases: ["å¼€å°","æ±´æ¢","æ±´äº¬","ä¸œäº¬","æ±´å·"],
        coord: [34.7973, 114.3076],
        region: "åä¸­ Â· é»„æ²³ä¸­ä¸‹æ¸¸",
        summary: "åŒ—å®‹ä¸œäº¬åŸæ‰€åœ¨åœ°ï¼Œæ›¾æ˜¯å½“æ—¶ä¸–ç•Œä¸Šäººå£ä¸ç»æµæœ€ç¹è£çš„éƒ½åŸä¹‹ä¸€ã€‚",
        events: [
          "äº”ä»£åæ™‹ã€åæ±‰ã€åå‘¨æ›¾åœ¨æ­¤å»ºéƒ½ï¼Œä¸ºä¸­åŸå‰²æ®æ”¿æƒä¸­å¿ƒã€‚",
          "åŒ—å®‹å¤ªç¥–èµµåŒ¡èƒ¤å®šéƒ½æ±´æ¢ï¼Œç§°â€œä¸œäº¬å¼€å°åºœâ€ï¼Œå½¢æˆâ€œæ±´äº¬ç¹åâ€ã€‚",
          "ã€Šæ¸…æ˜ä¸Šæ²³å›¾ã€‹æ‰€æç»˜çš„æ­£æ˜¯åŒ—å®‹ä¸œäº¬æ±´æ¢çš„åŸå¸‚ç”Ÿæ´»åœºæ™¯ã€‚",
          "é–åº·ä¹‹å˜åï¼Œé‡‘å…µæ”»é™·ä¸œäº¬ï¼ŒåŒ—å®‹ç­äº¡ï¼Œæˆä¸ºä¸­åå²ä¸Šé‡å¤§è½¬æŠ˜ã€‚"
        ]
      },
      {
        name: "æ­å·",
        aliases: ["æ­å·","ä¸´å®‰","é’±å¡˜","æ­å·åºœ"],
        coord: [30.2741, 120.1551],
        region: "åä¸œ Â· æ±Ÿå—æ°´ä¹¡",
        summary: "å—å®‹è¡Œåœ¨ä¸´å®‰æ‰€åœ¨åœ°ï¼Œå”å®‹ä»¥æ¥é‡è¦çš„æ±Ÿå—å•†è´¸ä¸æ–‡åŒ–ä¸­å¿ƒã€‚",
        events: [
          "å”ä»£è®¾æ­å·ï¼Œå› é’±å¡˜æ±Ÿè€Œå…´ï¼Œæˆä¸ºæ±Ÿå—è¿æ²³æ¢çº½ã€‚",
          "äº”ä»£å´è¶Šå›½åœ¨æ­¤å»ºéƒ½ï¼Œå‘å±•æ°´åˆ©ä¸ä½›æ•™æ–‡åŒ–ã€‚",
          "å—å®‹é«˜å®—èµµæ„å®šéƒ½ä¸´å®‰ï¼ˆä»Šæ­å·ï¼‰ï¼Œå½¢æˆâ€œå±±å¤–é’å±±æ¥¼å¤–æ¥¼ï¼Œè¥¿æ¹–æ­Œèˆå‡ æ—¶ä¼‘â€çš„éƒ½åŸæ™¯è±¡ã€‚",
          "å…ƒæ˜æ¸…æ—¶æœŸç»§ç»­ä½œä¸ºæ±Ÿå—é‡é•‡ï¼Œæµ·ä¸Šä¸ç»¸ä¹‹è·¯ä¸å†…æ²³äº¤é€šçš„é‡è¦èŠ‚ç‚¹ã€‚"
        ]
      },
      {
        name: "å¹¿å·",
        aliases: ["å¹¿å·","ç•ªç¦º","å—æµ·éƒ¡","å¹¿åºœ"],
        coord: [23.1291, 113.2644],
        region: "åå— Â· æµ·ä¸Šä¸ç»¸ä¹‹è·¯èµ·ç‚¹ä¹‹ä¸€",
        summary: "ä¸­å›½æœ€æ—©å¼€æ”¾çš„å¯¹å¤–é€šå•†å£å²¸ä¹‹ä¸€ï¼Œè‡ªå”å®‹ä»¥æ¥ä¾¿æ˜¯æµ·ä¸Šä¸ç»¸ä¹‹è·¯çš„é‡è¦èŠ‚ç‚¹ã€‚",
        events: [
          "ç§¦å§‹çš‡ç»Ÿä¸€å²­å—åäºæ­¤è®¾å—æµ·éƒ¡ï¼Œéƒ¡æ²»ç•ªç¦ºã€‚",
          "å”ä»£è®¾å¸‚èˆ¶å¸ï¼Œæˆä¸ºå¯¹å¤–è´¸æ˜“æœ€é‡è¦æ¸¯å£ä¹‹ä¸€ï¼Œé˜¿æ‹‰ä¼¯ä¸æ³¢æ–¯å•†äººäº‘é›†ã€‚",
          "æ¸…ä»£â€œå¹¿å·åä¸‰è¡Œâ€æ—¶æœŸï¼Œé•¿æœŸä½œä¸ºå¯¹è¥¿æ–¹è´¸æ˜“å”¯ä¸€åˆæ³•æ¸¯å£ã€‚",
          "è¿‘ä»£ä»¥æ¥åœ¨è¾›äº¥é©å‘½ã€æ°‘ä¸»é©å‘½è¿åŠ¨ä¸­éƒ½æ‰®æ¼”äº†é‡è¦è§’è‰²ã€‚"
        ]
      },
      {
        name: "æˆéƒ½",
        aliases: ["æˆéƒ½","ç›Šå·","é”¦å®˜åŸ","èŠ™è“‰åŸ"],
        coord: [30.6586, 104.0648],
        region: "è¥¿å— Â· æˆéƒ½å¹³åŸ",
        summary: "è‡ªå¤â€œå¤©åºœä¹‹å›½â€çš„æ ¸å¿ƒåŸå¸‚ä¹‹ä¸€ï¼Œæ”¿æ²»ã€ç»æµä¸æ–‡åŒ–åœ°ä½çªå‡ºã€‚",
        events: [
          "æˆ˜å›½èœ€å›½åœ¨æ­¤å»ºéƒ½ï¼Œæå†°çˆ¶å­ä¿®éƒ½æ±Ÿå °ï¼Œä½¿æˆéƒ½å¹³åŸæ°´åˆ©å‘è¾¾ã€‚",
          "è¥¿æ±‰æ—¶æœŸä¸ºç›Šå·æ²»æ‰€ï¼Œæˆä¸ºè¥¿å—äº¤é€šæ¢çº½ã€‚",
          "ä¸‰å›½æ—¶æœŸåˆ˜å¤‡åœ¨æˆéƒ½ç§°æ±‰ä¸­ç‹ï¼Œåå»ºèœ€æ±‰æ”¿æƒã€‚",
          "å”å®‹ä»¥æ¥ä¸ºè¥¿å—é‡é•‡ï¼ŒèŒ¶é©¬å¤é“ä¸ä¸ç»¸ä¹‹è·¯å—çº¿çš„é‡è¦èŠ‚ç‚¹ã€‚"
        ]
      }
    ];

    // === åœ°å›¾åˆå§‹åŒ– ===
    let map;
    let currentMarker = null;

    function initMap() {
      const mapEl = document.getElementById("map");
      if (!mapEl) return;

      map = L.map("map", {
        zoomControl: true
      }).setView([35, 103], 4); // ä¸­å›½å¤§è‡´ä¸­å¿ƒ

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 18,
        attribution: "&copy; OpenStreetMap contributors"
      }).addTo(map);
    }

    // === æœç´¢ & åŒ¹é…é€»è¾‘ ===
    function handleSearch() {
      const inputEl = document.getElementById("placeInput");
      const statusEl = document.getElementById("mapStatus");
      const infoEl = document.getElementById("infoContainer");
      if (!inputEl || !statusEl || !infoEl) return;

      const raw = inputEl.value.trim();
      if (!raw) {
        infoEl.innerHTML =
          '<p class="info-empty">è¯·å…ˆåœ¨ä¸Šæ–¹è¾“å…¥ä¸€ä¸ªä¸­å›½çš„åŸå¸‚æˆ–åœ°å€ï¼Œä¾‹å¦‚ï¼š<strong>åŒ—äº¬ä¸­å…³æ‘ã€è¥¿å®‰é›å¡”åŒºã€å—äº¬ã€æ´›é˜³é¾™é—¨</strong>ã€‚</p>';
        statusEl.innerHTML =
          '<div class="dot-led"></div><span>çŠ¶æ€ï¼šæœªè¾“å…¥åœ°å€ï¼Œå½“å‰ä»ä¸ºä¸­å›½å…¨å›¾è§†è§’ã€‚</span>';
        return;
      }

      // æ¨¡ç³ŠåŒ¹é…ï¼šçœ‹è¾“å…¥å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸä¸ªåˆ«ç§°ï¼Œæˆ–æŸä¸ªåˆ«ç§°åŒ…å«è¾“å…¥
      const keyword = raw.replace(/\s+/g, "");
      let match = null;

      for (const p of places) {
        if (p.aliases.some(a => keyword.includes(a) || a.includes(keyword))) {
          match = p;
          break;
        }
      }

      if (!match) {
        infoEl.innerHTML =
          '<p class="info-empty">æš‚æœªåœ¨å†…ç½®æ•°æ®ä¸­æ‰¾åˆ°ä¸ <strong>' +
          raw +
          "</strong> å¯¹åº”çš„å†å²åœ°åä¿¡æ¯ã€‚<br>ä½ å¯ä»¥ï¼š<br>Â· æ¢ä¸€ä¸ªæ›´â€œç²—â€çš„åœ°åï¼ˆå¦‚åŸå¸‚åï¼‰ï¼›<br>Â· æˆ–è€…åœ¨è„šæœ¬çš„ <code>places</code> æ•°ç»„ä¸­è‡ªè¡Œæ·»åŠ è¯¥åœ°å€çš„å†å²èµ„æ–™ã€‚</p>";
        statusEl.innerHTML =
          '<div class="dot-led" style="background:#f97316;box-shadow:0 0 8px rgba(248,113,113,0.8)"></div>' +
          '<span>çŠ¶æ€ï¼šæœªå‘½ä¸­å†…ç½®åŸå¸‚æ•°æ®ï¼Œåœ°å›¾ä¿æŒå½“å‰è§†è§’ã€‚</span>';
        return;
      }

      // æ›´æ–°åœ°å›¾ä½ç½®
      if (map) {
        map.flyTo(match.coord, 7, { duration: 0.8 });

        if (currentMarker) {
          currentMarker.remove();
        }

        currentMarker = L.marker(match.coord).addTo(map)
          .bindPopup("<b>" + match.name + "</b><br/>" + match.region)
          .openPopup();
      }

      // æ›´æ–°çŠ¶æ€æ 
      statusEl.innerHTML =
        '<div class="dot-led"></div>' +
        '<span>çŠ¶æ€ï¼šå·²å®šä½åˆ° <strong>' +
        match.name +
        "</strong>ï¼Œè§†è§’å·²ç§»åŠ¨åˆ°å…¶å¤§è‡´ä½ç½®ã€‚</span>";

      // æ›´æ–°ä¿¡æ¯é¢æ¿
      const aliasBadges = match.aliases
        .map(a => '<span class="info-badge">' + a + "</span>")
        .join("");

      const eventsList = match.events
        .map(e => "<li>" + e + "</li>")
        .join("");

      infoEl.innerHTML = `
        <div class="info-item">
          <div class="info-label">ç°ç”¨åç§°</div>
          <div class="info-value"><strong>${match.name}</strong></div>
        </div>

        <div class="info-item">
          <div class="info-label">å†å²åˆ«ç§° / ç›¸å…³åœ°å</div>
          <div class="info-badge-row">
            ${aliasBadges}
          </div>
        </div>

        <div class="info-item">
          <div class="info-label">å¤§è‡´åŒºåŸŸ</div>
          <div class="info-value">${match.region}</div>
        </div>

        <div class="info-item">
          <div class="info-label">å†å²åœ°ä½æ¦‚è§ˆ</div>
          <div class="info-value" style="font-size:0.85rem;color:${getMutedColor()}">
            ${match.summary}
          </div>
        </div>

        <div class="info-item">
          <div class="info-label">è‹¥å¹²ä»£è¡¨æ€§å†å²äº‹ä»¶ / æƒ…æ™¯ç¤ºä¾‹</div>
          <ul class="info-events">
            ${eventsList}
          </ul>
        </div>
      `;
    }

    function getMutedColor() {
      return "#9ca3af";
    }

    // å›è½¦é”®è§¦å‘æŸ¥è¯¢
    document.addEventListener("DOMContentLoaded", function () {
      const inputEl = document.getElementById("placeInput");
      if (inputEl) {
        inputEl.addEventListener("keydown", function (e) {
          if (e.key === "Enter") {
            e.preventDefault();
            handleSearch();
          }
        });
      }

      // åˆå§‹åŒ–åœ°å›¾ & å¹´ä»½
      initMap();
      const yearEl = document.getElementById("year");
      if (yearEl) yearEl.textContent = new Date().getFullYear();
    });

    // è¿”å›é¡¶éƒ¨
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  </script>
</body>
</html>
